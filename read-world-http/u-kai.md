# Real World HTTP

## 1

- スキーマ、ホスト名、パス、ハッシュはどれがどれか忘れがち
- ヘッダーは仕様上フィールドと呼ぶらしい(知らなかった)
- Referer はブラウザが勝手につけるもの？
  - サーバーサイドじゃないよな

## 2 HTTP/1.0 の世界:基本となる 4 つの要素

- いろんな歴史の話
- いろんな組織があるんだな〜という感じ
- MDN が Mozilla ってのは知っていたけど、Google や MS もコントリビュートしているのは知らなかった
  - 事実上のブラウザの標準みたい
- HTTP/0.9 では HTML 以外を送る想定がなかったり、ステータスを返すこともできなかった
- ヘッダーに X をつけると独自ヘッダーとして定義できるのは知らなかった
  - X-xxxx みたいなやつはよく見かけていたから理由がよくわかった
- ヘッダーの Key 値はライブラリによって正規化の方法が変わるのはなんとなくそんな気がしてたけど実際に知れてよかった
- Content Sniffing はお節介だったってことか
  - X-Content-Type-Options: nosniff はよくみるが、今ではおまじないレベルって感じか
- 3xx 版のステータスはリダイレクトの意味と思っていて、それはあっているけど、もっと抽象的にいうとサーバーからの命令って書いてあって、なるほどなーと感じた
- 999 ステータスコード知らなかった
  - お茶目すぎ
  - 429 でいいやん
- リダイレクトの回数に制限をなくしたがブラウザ側で無限ループを検知して止める責務が追いやられているのは知らなかった
- ヘッダーやクエリは複数同じ key を使ってもいいけど、どうパースされるかはフレームワーク次第はまじで鬱陶しい
  - go は同じ key を複数使うと配列
  - rails は同じ key を複数使うと最後の値だけ評価される
    - 配列にしたいなら `key[]=value1&key[]=value2` みたいにする
      - 若干 rails は違和感
- テキストにマークしてリンクに情報を含めるのはよくやるけど、これは URL フラグメントテキストディレクティブっていうんだ
- 国際化ドメイン名とエンコーディングルール Punycode は初めて知った。こんなことできるんや
- URL にめちゃめちゃクエリとかついているのはバックエンド側で統計とか取っていることがあるから説は面白い
  - そのため、ノイズがないようにバックエンド側は正規 URL を好むってのも面白い
- curl で-d @FILE_NAME でファイルの中身を body として送れるのは知らなかった
- 前の URL の 2000 文字制限のために Elasticsearch は GET で Body を受け取るの知らなかった

  - ただ、前の説明でもあるように GET で Body は送れないようにした方が良いし受け取らないべきだと思う

- ヘッダーではなくフィールドと呼ぶべきだったり、URL や URI が混ざったりと標準化ってやっぱり難しいなと思った
